<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Vedic Kundali Software</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      padding: 20px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 8px;
    }

    label {
      display: block;
      margin: 10px 0 5px;
    }

    input,
    select,
    button {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
    }

    img {
      max-width: 100%;
      margin-top: 20px;
    }

    pre {
      background: #eee;
      padding: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Vedic Kundali Software</h1>
    <label>Name</label>
    <input id="name" />
    <label>Day</label>
    <input id="day" type="number" min="1" max="31" />
    <label>Month</label>
    <select id="month">
      <option value="">Select</option>
      <option value="1">January</option><option value="2">February</option>
      <option value="3">March</option><option value="4">April</option>
      <option value="5">May</option><option value="6">June</option>
      <option value="7">July</option><option value="8">August</option>
      <option value="9">September</option><option value="10">October</option>
      <option value="11">November</option><option value="12">December</option>
    </select>
    <label>Year</label>
    <input id="year" type="number" min="1900" max="2100" />
    <label>Hour (0–23)</label>
    <input id="hour" type="number" min="0" max="23" />
    <label>Minute (0–59)</label>
    <input id="minute" type="number" min="0" max="59" />
    <label>Latitude</label>
    <input id="latitude" />
    <label>Longitude</label>
    <input id="longitude" />
    <button onclick="submitForm()">Generate Kundali</button>

    <img id="chart" src="" style="display:none" />
    <pre id="analysis"></pre>
  </div>
  <script>
    function submitForm() {
      const data = {
        name: document.getElementById('name').value,
        day: document.getElementById('day').value,
        month: document.getElementById('month').value,
        year: document.getElementById('year').value,
        hour: document.getElementById('hour').value,
        minute: document.getElementById('minute').value,
        latitude: document.getElementById('latitude').value,
        longitude: document.getElementById('longitude').value,
      };
      fetch('/calculate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data),
      })
        .then((res) => res.json())
        .then((json) => {
          if (json.success) {
            document.getElementById('chart').src = json.chart_url;
            document.getElementById('chart').style.display = 'block';
            document.getElementById('analysis').textContent = json.predictions;
          }
        });
    }
    const now = new Date();
    document.getElementById('day').value = now.getDate();
    document.getElementById('month').value = now.getMonth() + 1;
    document.getElementById('year').value = now.getFullYear();
    document.getElementById('hour').value = now.getHours();
    document.getElementById('minute').value = now.getMinutes();
  </script>
</body>
</html>
